$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
code: .
command: >-
  python src/model/train.py
  --training_data ${{inputs.training_data}}
  --reg_rate 0.01
  --target_col None
  --test_size 0.2
  --random_state 42
  --output ${{outputs.model}}
inputs:
  training_data:
    type: uri_folder
    # Local path - will be uploaded when job is submitted
    path: ../production/data
outputs:
  model:
    type: uri_folder
    #mode: rw_mount
    mode: upload
environment: azureml:AzureML-sklearn-0.24-ubuntu18.04-py37-cpu@latest
compute: cpu-cluster
experiment_name: diabetic_ogistic_regression_training
description: >-
  Train a LogisticRegression model on CSV files in `training_data`. 
  Uses basic preprocessing, MLflow autologging and logs accuracy/precision/recall/f1
